<div class="row">
  <div class="col-sm-12">
    <div class="card">
      <div class="card-header b-b-primary d-flex justify-content-between align-items-center">
        <h5>{{ 'Preview control centers' | translate }}</h5>
        <button class="btn btn-primary px-3 py-2" (click)="addOrEditControlCenter()" title="Dodaj kontrolni centar"><i
            class="fa fa-plus"></i></button>
      </div>
      <div class="card-body custom-datatable">
        <ngx-datatable class="bootstrap" [rows]="(controlCenters$ | async) || []"
          [loadingIndicator]="isLoadingMainTable | async" [columns]="mainTableColumns" [columnMode]="'force'"
          [headerHeight]="'50'" [footerHeight]="50" [rowHeight]="'auto'" [offset]="currentPage" limit="{{pageSize}}"
          (page)="setPage($event)" (sort)="onSort($event)" [externalSorting]="true" [externalPaging]="true"
          [count]="count" [messages]="{
            emptyMessage: currentLang == 'hr' ? 'Nema rezultata' : 'No entries',
            totalMessage: currentLang == 'hr' ? 'ukupno' : 'total'}">
          <!-- (activate)="onClickMainTableRow($event)" -->
          <ng-container *ngFor="let column of mainTableColumns; let i = index;">
            <ngx-datatable-column *ngIf='column.prop === "actions"' name="{{column.name}}" [maxWidth]="column.maxWidth"
              [minWidth]="column.minWidth">
              <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                <span class="d-flex justify-content-between">
                  <button class='btn btn-outline-warning ngx-button' title='Uredi'
                    (click)="addOrEditControlCenter(row)">
                    <i class="fa fa-pencil"></i>
                  </button>
                  <button class='btn btn-outline-danger ngx-button' title='ObriÅ¡i' (click)="deleteControlCenter(row)">
                    <i class="fa fa-trash"></i>
                  </button>
                </span>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column *ngIf='column.prop == "sendDailyReport"' name="{{column.name}}" prop="{{column.prop}}"
              [maxWidth]="column.maxWidth" [minWidth]="column.minWidth">
              <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                <span *ngIf="value; else dailyReportFalse">
                  {{ parseTime(row.sendTime) }}
                </span>
                <ng-template #dailyReportFalse>
                  <span>
                    {{'Not defined' | translate}}
                  </span>
                </ng-template>
              </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column *ngIf='column.prop !== "actions" && column.prop !== "sendDailyReport"'
              name="{{column.name}}" prop="{{column.prop}}" [maxWidth]="column.maxWidth" [minWidth]="column.minWidth">
            </ngx-datatable-column>
          </ng-container>
        </ngx-datatable>
      </div>
    </div>
  </div>
</div>
